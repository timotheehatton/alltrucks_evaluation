{% extends "admin/base_site.html" %}

{% block content %}
<h2>Create a Company</h2>

<div class="card">
    <div class="card-content">
        <form method="post">
            {% csrf_token %}
            <div class="form-section">
                <h5>Workshop Information</h5>
                <div class="input-field">
                    <label for="{{ form.name.id_for_label }}">{{ form.name.label }}</label>
                    {{ form.name }}
                </div>
                <div class="input-field">
                    <label for="{{ form.city.id_for_label }}">{{ form.city.label }}</label>
                    {{ form.city }}
                </div>
                <div class="input-field">
                    <label for="{{ form.country.id_for_label }}">{{ form.country.label }}</label>
                    {{ form.country }}
                </div>
                <div class="input-field">
                    <label for="{{ form.cu_number.id_for_label }}">{{ form.cu_number.label }}</label>
                    {{ form.cu_number }}
                </div>
            </div>
            <div class="form-section">
                <h5>Workshop Manager</h5>
                <div class="input-field">
                    <label for="{{ form.workshop_first_name.id_for_label }}">{{ form.workshop_first_name.label }}</label>
                    {{ form.workshop_first_name }}
                </div>
                <div class="input-field">
                    <label for="{{ form.workshop_last_name.id_for_label }}">{{ form.workshop_last_name.label }}</label>
                    {{ form.workshop_last_name }}
                </div>
                <div class="input-field">
                    <label for="{{ form.workshop_email.id_for_label }}">{{ form.workshop_email.label }}</label>
                    {{ form.workshop_email }}
                </div>
                <div class="input-field">
                    <label for="{{ form.workshop_ct_number.id_for_label }}">{{ form.workshop_ct_number.label }}</label>
                    {{ form.workshop_ct_number }}
                </div>
            </div>
            <div class="form-section">
                <h5>Technicians</h5>
                <div id="technicians-container">
                    <div class="technician-group">
                        <div class="input-field">
                            <label for="technician_first_name_1">Technician First Name</label>
                            <input type="text" name="technician_first_name_1" id="technician_first_name_1" required>
                        </div>
                        <div class="input-field">
                            <label for="technician_last_name_1">Technician Last Name</label>
                            <input type="text" name="technician_last_name_1" id="technician_last_name_1" required>
                        </div>
                        <div class="input-field">
                            <label for="technician_email_1">Technician Email Address</label>
                            <input type="email" name="technician_email_1" id="technician_email_1" required>
                        </div>
                        <div class="input-field">
                            <label for="technician_ct_number_1">Technician CT Number</label>
                            <input type="text" name="technician_ct_number_1" id="technician_ct_number_1" required>
                        </div>
                        <span class="btn red remove-button" onclick="removeTechnician(this)">Remove</span>
                    </div>
                </div>
                <button class="btn-floating blue" onclick="addTechnician()"><i class="material-icons">add</i></button>
            </div>
            <button type="submit" class="btn blue">Create</button>
        </form>
    </div>
</div>
{% endblock %}

{% block script %}
<script>
    function addTechnician() {
        const container = document.getElementById('technicians-container');
        const template = document.querySelector('.technician-group').cloneNode(true);
        template.style.display = 'block';
        template.id = '';
        container.appendChild(template);
    }

    function removeTechnician(element) {
        element.parentElement.remove();
    }
</script>
{% endblock %}